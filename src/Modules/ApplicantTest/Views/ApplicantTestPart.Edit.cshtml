@using ApplicantTest.Models
@model ApplicantTestPart

<!DOCTYPE html>
<html>
<head>
    <style>
        html, body {
            height: 100%;
            width: 100%;
            padding: 0;
            margin: 0;
        }

        .iframe-container {
            width: 100%;
            height: 44rem;
            border: 2px solid black;
        }

            .iframe-container iframe {
                width: 100%;
                height: 100%;
                border: none;
            }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM fully loaded and parsed');
            // Listen for messages from the iframe
            window.addEventListener('message', (event) => {
                console.log('Message received:', event);
                if (event.data && event.data.event === 'emailSent') {
                    console.log('Email sent event captured in the parent document!', event.data.details);
                    document.getElementById('emailSent').value = 'true';
                } else if (event.data && event.data.event === 'messageSent') {
                    console.log('Message sent event captured in the parent document!', event.data.details);
                    switch (event.data.details.selectedUser) {
                        case 'Asako Satoshi':
                            document.getElementById('messageSentToAsakoSatoshi').value = 'true';
                            break;
                        case 'Lily Wang':
                            document.getElementById('messageSentToLilyWang').value = 'true';
                            break;
                        case 'Madison Byers':
                            document.getElementById('messageSentToMadisonByers').value = 'true';
                            break;
                        case 'Dominic Gonzalez':
                            document.getElementById('messageSentToDominicGonzalez').value = 'true';
                            break;
                        case 'Simone Khan':
                            document.getElementById('messageSentToSimoneKhan').value = 'true';
                            break;
                        default:
                            console.error('Unknown user:', event.data.details.selectedUser);
                    }
                } else if (event.data && event.data.event === 'bookmarkClicked') {
                    console.log('Bookmark clicked event captured in the parent document!', event.data.details);
                    document.getElementById('bookmarkClicked').value = 'true';
                } else if (event.data && event.data.event === 'formSubmitted') {
                    console.log('Form submitted event captured in the parent document!', event.data.details);
                    document.getElementById('formSubmitted').value = 'true';
                } else {
                    console.log('Unknown event received:', event.data);
                }
            });
        });
    </script>
    <div class="iframe-container">
        <iframe src="/ApplicantTest/ApplicantTest/index.html" onload="console.log('iFrame loaded successfully.')" onerror="console.error('Error loading iFrame.');"></iframe>
    </div>
    <fieldset class="form-group hidden" asp-validation-class-for="EmailSent">
        <label asp-for="EmailSent">Email Sent</label>
        <input type="hidden" asp-for="EmailSent" class="form-check-input" id="emailSent" value="false" />
        <span asp-validation-for="EmailSent" class="text-danger"></span>
    </fieldset>
    <fieldset class="form-group hidden" asp-validation-class-for="MessageSentToAsakoSatoshi">
        <label asp-for="MessageSentToAsakoSatoshi">Message Sent To Asako Satoshi</label>
        <input type="hidden" asp-for="MessageSentToAsakoSatoshi" class="form-check-input" id="messageSentToAsakoSatoshi" value="false" />
        <span asp-validation-for="MessageSentToAsakoSatoshi" class="text-danger"></span>
    </fieldset>
    <fieldset class="form-group hidden" asp-validation-class-for="MessageSentToLilyWang">
        <label asp-for="MessageSentToLilyWang">Message Sent To Lily Wang</label>
        <input type="hidden" asp-for="MessageSentToLilyWang" class="form-check-input" id="messageSentToLilyWang" value="false" />
        <span asp-validation-for="MessageSentToLilyWang" class="text-danger"></span>
    </fieldset>
    <fieldset class="form-group hidden" asp-validation-class-for="MessageSentToMadisonByers">
        <label asp-for="MessageSentToMadisonByers">Message Sent To Madison Byers</label>
        <input type="hidden" asp-for="MessageSentToMadisonByers" class="form-check-input" id="messageSentToMadisonByers" value="false" />
        <span asp-validation-for="MessageSentToMadisonByers" class="text-danger"></span>
    </fieldset>
    <fieldset class="form-group hidden" asp-validation-class-for="MessageSentToDominicGonzalez">
        <label asp-for="MessageSentToDominicGonzalez">Message Sent To Dominic Gonzalez</label>
        <input type="hidden" asp-for="MessageSentToDominicGonzalez" class="form-check-input" id="messageSentToDominicGonzalez" value="false" />
        <span asp-validation-for="MessageSentToDominicGonzalez" class="text-danger"></span>
    </fieldset>
    <fieldset class="form-group hidden" asp-validation-class-for="MessageSentToSimoneKhan">
        <label asp-for="MessageSentToSimoneKhan">Message Sent To Simone Khan</label>
        <input type="hidden" asp-for="MessageSentToSimoneKhan" class="form-check-input" id="messageSentToSimoneKhan" value="false" />
        <span asp-validation-for="MessageSentToSimoneKhan" class="text-danger"></span>
    </fieldset>
    <fieldset class="form-group hidden" asp-validation-class-for="BookmarkClicked">
        <label asp-for="BookmarkClicked">Bookmark Clicked</label>
        <input type="hidden" asp-for="BookmarkClicked" class="form-check-input" id="bookmarkClicked" value="false" />
        <span asp-validation-for="BookmarkClicked" class="text-danger"></span>
    </fieldset>
    @*     <fieldset class="form-group hidden" asp-validation-class-for="FormSubmitted">
    <label asp-for="FormSubmitted">Form Submitted</label>
    <input type="hidden" asp-for="FormSubmitted" class="form-check-input" id="formSubmitted" value="false" />
    <span asp-validation-for="FormSubmitted" class="text-danger"></span>
    </fieldset> *@
</body>
</html>
